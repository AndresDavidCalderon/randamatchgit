[gd_scene load_steps=24 format=2]

[ext_resource path="res://forall/player/player.tscn" type="PackedScene" id=1]
[ext_resource path="res://forall/visual/camera.tscn" type="PackedScene" id=3]
[ext_resource path="res://forall/generator.gd" type="Script" id=5]
[ext_resource path="res://gui/movement.tscn" type="PackedScene" id=7]
[ext_resource path="res://forall/main.gd" type="Script" id=15]
[ext_resource path="res://forall/visual/baker.gd" type="Script" id=21]
[ext_resource path="res://forall/sistematic/chunk.tscn" type="PackedScene" id=23]
[ext_resource path="res://forall/sistematic/chunk.gd" type="Script" id=24]
[ext_resource path="res://forall/sistematic/chunktypes/hill.gd" type="Script" id=25]
[ext_resource path="res://forall/sistematic/chunktypes/plain.gd" type="Script" id=26]
[ext_resource path="res://forall/sistematic/chunktypes/out.gd" type="Script" id=27]
[ext_resource path="res://forall/sistematic/chunktypes/caves/caveentrance.gd" type="Script" id=29]
[ext_resource path="res://forall/sistematic/resoursman.gd" type="Script" id=32]
[ext_resource path="res://forall/chunkconts/hills/caves/ramptocavebody.tscn" type="PackedScene" id=33]
[ext_resource path="res://forall/chunkconts/hills/caves/torampbody.tscn" type="PackedScene" id=34]
[ext_resource path="res://forall/chunkconts/hills/caves/todownbody.tscn" type="PackedScene" id=35]
[ext_resource path="res://forall/sistematic/debug/tohill.png" type="Texture" id=36]
[ext_resource path="res://forall/sistematic/chunktypes/caves/cavetunnel.gd" type="Script" id=37]
[ext_resource path="res://forall/chunkconts/hills/caves/cavetunnel.tscn" type="PackedScene" id=38]

[sub_resource type="GDScript" id=8]
script/source = "extends car
func _on_generator_generated():
	if server.type!=\"none\" and server.players>1:
		var totalspace=get_node(\"/root/main/generator\").terrwide*30
		var partwide=totalspace/server.players
		var myspace=partwide*server.orderbyid[str(get_tree().get_network_unique_id())]
		translation.x=myspace-(totalspace/2)
	inittrans=translation
	initrot=rotation
	sleeping=false
	mode=MODE_RIGID
	$col.disabled=false
"

[sub_resource type="BoxShape" id=1]
extents = Vector3( 36.0174, 1, 34.3437 )

[sub_resource type="ProceduralSky" id=2]
sky_top_color = Color( 0.247059, 0.321569, 0.364706, 1 )
sky_horizon_color = Color( 0.203922, 0.356863, 0.478431, 1 )
ground_bottom_color = Color( 0.129412, 0.411765, 0.478431, 1 )
ground_horizon_color = Color( 0.419608, 0.494118, 0.65098, 1 )
ground_energy = 0.47
sun_latitude = 139.01

[sub_resource type="Environment" id=3]
background_mode = 2
background_sky = SubResource( 2 )
ambient_light_color = Color( 1, 1, 1, 1 )
fog_depth_begin = 19.0
fog_transmit_enabled = true
fog_transmit_curve = 0.196146
glow_intensity = 1.37
glow_strength = 1.4
glow_hdr_threshold = 0.83
adjustment_enabled = true

[node name="main" type="Node"]
script = ExtResource( 15 )
maxtries = 4

[node name="player" parent="." instance=ExtResource( 1 )]
script = SubResource( 8 )

[node name="vis" parent="player" index="5"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 3.37464, 0.288897, -0.128355 )

[node name="ruedaback" parent="player" index="6"]
transform = Transform( -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0.267883, -1.00491, 1.71085 )

[node name="playerinteract" parent="player" index="10"]
mounted = true

[node name="cam" parent="player" instance=ExtResource( 3 )]
transform = Transform( 0.997127, 0.056259, -0.0507167, -0.0163141, 0.813374, 0.581513, 0.073967, -0.579015, 0.811955, -5.18281e-06, 20.3855, 18.6466 )

[node name="movement" parent="player/cam" instance=ExtResource( 7 )]

[node name="generator" type="Node" parent="."]
script = ExtResource( 5 )
hillprov = 50
betweencaves = 5
outsidechunks = 10
leng = 40
cavechance = 70
chunk = ExtResource( 23 )
chunkbase = ExtResource( 24 )
hillscript = ExtResource( 25 )
plainscript = ExtResource( 26 )
outscript = ExtResource( 27 )
cavescript = ExtResource( 29 )

[node name="floor" type="StaticBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.36519, 0 )
collision_layer = 3
collision_mask = 3

[node name="col" type="CollisionShape" parent="floor"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00014019, 0.0109382, 0.0236282 )
shape = SubResource( 1 )

[node name="box" type="CSGBox" parent="floor"]
use_in_baked_light = true
width = 71.6837
depth = 68.5282

[node name="sun" type="DirectionalLight" parent="."]
transform = Transform( 0.907946, 3.51954e-07, 0.419088, -0.319899, -0.646017, 0.693056, 0.270738, -0.763323, -0.586548, 39.0947, 32.5736, -16.4536 )
shadow_enabled = true
directional_shadow_blend_splits = true
directional_shadow_depth_range = 1
directional_shadow_max_distance = 274.2

[node name="env" type="WorldEnvironment" parent="."]
environment = SubResource( 3 )

[node name="baker" type="GIProbe" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4.93565, 2.58567, 21.4044 )
subdiv = 2
extents = Vector3( 7.24535, 6.53387, 4.88267 )
propagation = 0.58
script = ExtResource( 21 )

[node name="resman" type="Node" parent="."]
script = ExtResource( 32 )
initresources = [ ExtResource( 34 ), ExtResource( 33 ), ExtResource( 35 ), ExtResource( 36 ), ExtResource( 37 ), ExtResource( 38 ) ]

[connection signal="generated" from="generator" to="player" method="_on_generator_generated"]
[connection signal="generated" from="generator" to="baker" method="_on_generator_generated"]

[editable path="player"]
