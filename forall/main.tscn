[gd_scene load_steps=35 format=2]

[ext_resource path="res://forall/player/player.tscn" type="PackedScene" id=1]
[ext_resource path="res://gui/popup.tscn" type="PackedScene" id=2]
[ext_resource path="res://forall/visual/camera.tscn" type="PackedScene" id=3]
[ext_resource path="res://ChunkTypes/walls/hill/HillWall.gltf" type="PackedScene" id=4]
[ext_resource path="res://forall/generator.gd" type="Script" id=5]
[ext_resource path="res://Camera/LookSwitch.gd" type="Script" id=6]
[ext_resource path="res://gui/movement.tscn" type="PackedScene" id=7]
[ext_resource path="res://forall/player/Debug.gd" type="Script" id=8]
[ext_resource path="res://forall/player/suspension.gd" type="Script" id=9]
[ext_resource path="res://forall/Killer.gd" type="Script" id=10]
[ext_resource path="res://gui/debug/FreeCamera.gd" type="Script" id=11]
[ext_resource path="res://gui/debug/ThrottlePoint.png" type="Texture" id=12]
[ext_resource path="res://gui/debug/BrakePoint.png" type="Texture" id=13]
[ext_resource path="res://gui/Jump/JumpPressed.png" type="Texture" id=14]
[ext_resource path="res://gui/Jump/Jump.png" type="Texture" id=15]
[ext_resource path="res://gui/Jump/JumpLoadFull.png" type="Texture" id=16]
[ext_resource path="res://gui/Jump/JumpLoad.png" type="Texture" id=17]
[ext_resource path="res://gui/Jump/Jump.gd" type="Script" id=18]
[ext_resource path="res://ChunkTypes/chunk.tscn" type="PackedScene" id=23]
[ext_resource path="res://ChunkTypes/chunk.gd" type="Script" id=24]
[ext_resource path="res://ChunkTypes/grass/hill/hill.gd" type="Script" id=25]
[ext_resource path="res://ChunkTypes/grass/plain/plain.gd" type="Script" id=26]
[ext_resource path="res://ChunkTypes/caves/entrance/caveentrance.gd" type="Script" id=29]
[ext_resource path="res://forall/sistematic/resoursman.gd" type="Script" id=32]
[ext_resource path="res://ChunkTypes/caves/entrance/CaveEntrance.tscn" type="PackedScene" id=33]
[ext_resource path="res://ChunkTypes/caves/DebugIcons/tohill.png" type="Texture" id=36]
[ext_resource path="res://ChunkTypes/caves/tunnel/cavetunnel.gd" type="Script" id=37]

[sub_resource type="BoxShape" id=4]
extents = Vector3( 0.244001, 3.86637, 0.307593 )

[sub_resource type="BoxShape" id=1]
extents = Vector3( 36.0174, 1, 34.3437 )

[sub_resource type="ProceduralSky" id=2]
sky_top_color = Color( 0.247059, 0.321569, 0.364706, 1 )
sky_horizon_color = Color( 0.203922, 0.356863, 0.478431, 1 )
ground_bottom_color = Color( 0.129412, 0.411765, 0.478431, 1 )
ground_horizon_color = Color( 0.419608, 0.494118, 0.65098, 1 )
ground_energy = 0.47
sun_latitude = 139.01

[sub_resource type="Environment" id=3]
background_mode = 2
background_sky = SubResource( 2 )
ambient_light_color = Color( 1, 1, 1, 1 )
fog_depth_begin = 19.0
fog_transmit_enabled = true
fog_transmit_curve = 0.196146
glow_intensity = 1.37
glow_strength = 1.4
glow_hdr_threshold = 0.83
adjustment_enabled = true

[sub_resource type="BoxShape" id=5]
extents = Vector3( 120, 120, 1 )

[sub_resource type="Gradient" id=6]
colors = PoolColorArray( 0.909804, 0.027451, 0.027451, 1, 0.427451, 0.0705882, 0.0705882, 1 )

[sub_resource type="GradientTexture" id=7]
gradient = SubResource( 6 )
width = 1200

[node name="main" type="Node"]

[node name="player" parent="." instance=ExtResource( 1 )]
transform = Transform( -1, 0, 0, 0, 1, 0, 0, 0, -1, -0.01, 15.088, 48.617 )
mass = 1.0
gravity_scale = 1.5
linear_velocity = Vector3( 0, -10, 0 )
angular_damp = 4.159
speed = 50.0
rotspeed = 80.0
balancing = false
balancing_force = 20.0
rotonair = 20.0
jump_force = 40.0
vrotlimit = 90.0
impulse_offset = Vector3( 0, 3, 0 )

[node name="col" parent="player/getflor" index="0"]
transform = Transform( 1, 0, 2.84217e-14, 0, 1, 0, -2.84217e-14, 0, 1, -0.978917, 2.65557, 1.58941 )

[node name="vis" parent="player" index="8"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 3.37464, 0.288897, -0.128355 )

[node name="ruedaback" parent="player" index="9"]
transform = Transform( -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0.267883, -1.00491, 1.71085 )

[node name="ruedafront" parent="player" index="10"]
transform = Transform( -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0.139058, -1.00491, -10.4764 )
lifted_offset = Vector3( 0, 5, 0 )

[node name="front" type="Area" parent="player/ruedafront" index="1"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1.44103, -0.128825, -1.7433 )
collision_layer = 2
collision_mask = 2

[node name="col" type="CollisionShape" parent="player/ruedafront/front"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.190497, 0 )
shape = SubResource( 4 )

[node name="playerinteract" parent="player" index="13"]
mounted = true

[node name="Suspension" type="Node" parent="player"]
script = ExtResource( 9 )
automatic_suspension = 14.0

[node name="CamHolder" type="Spatial" parent="player"]

[node name="cam" parent="player" instance=ExtResource( 3 )]
transform = Transform( 0.998055, 0.0362501, -0.050714, 0, 0.813537, 0.581513, 0.0623376, -0.580382, 0.811955, -2.81133, 33.1639, 41.9103 )
fov = 91.3
far = 600.0
margin = 3.82
process_mode = 1

[node name="BackCamera" type="ClippedCamera" parent="player"]
transform = Transform( -0.99721, 0.0564289, -0.0488682, 0.00373632, 0.691559, 0.722311, 0.0745545, 0.720113, -0.68984, 2.29105e-07, 32.0218, -35.7128 )
fov = 101.5
far = 900.0
margin = 3.59
process_mode = 1
collision_mask = 4

[node name="LookSwitch" type="Node" parent="player"]
script = ExtResource( 6 )
cameras = {
"BackCam": NodePath("../BackCamera"),
"FreeCam": NodePath("../../FreeCamera"),
"MainCam": NodePath("../cam"),
"SideCam": NodePath("../SideCam")
}

[node name="Debug" type="Spatial" parent="player"]
script = ExtResource( 8 )

[node name="ThrottlePoint" type="Sprite3D" parent="player/Debug"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.439825, -25.1903 )
pixel_size = 0.25
billboard = 1
alpha_cut = 2
texture = ExtResource( 12 )

[node name="BrakePoint" type="Sprite3D" parent="player/Debug"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 12.6079 )
pixel_size = 0.25
alpha_cut = 2
texture = ExtResource( 13 )

[node name="SideCam" type="ClippedCamera" parent="player"]
transform = Transform( -4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 19.7766, 2.52089, -3.47996 )
fov = 126.2
margin = 5.17
process_mode = 1
collision_mask = 4

[node name="floor" type="StaticBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.36519, 0 )
collision_layer = 3
collision_mask = 3

[node name="col" type="CollisionShape" parent="floor"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00014019, 0.0109382, 0.0236282 )
shape = SubResource( 1 )

[node name="box" type="CSGBox" parent="floor"]
use_in_baked_light = true
use_collision = true
width = 71.6837
depth = 68.5282

[node name="sun" type="DirectionalLight" parent="."]
transform = Transform( 0.907946, 3.92074e-07, 0.419088, -0.319899, -0.646017, 0.693056, 0.270738, -0.763323, -0.586548, 39.0947, 32.5736, -16.4536 )
shadow_enabled = true
directional_shadow_blend_splits = true
directional_shadow_depth_range = 1
directional_shadow_max_distance = 274.2

[node name="env" type="WorldEnvironment" parent="."]
environment = SubResource( 3 )

[node name="resman" type="Node" parent="."]
script = ExtResource( 32 )
initresources = [ ExtResource( 33 ), ExtResource( 36 ), ExtResource( 37 ) ]

[node name="UI" type="CanvasLayer" parent="."]

[node name="fps" type="Label" parent="UI"]
margin_right = 40.0
margin_bottom = 14.0
rect_scale = Vector2( 3.31955, 3.31955 )
text = "fps: "
__meta__ = {
"_edit_use_anchors_": true
}

[node name="popup" parent="UI" instance=ExtResource( 2 )]
margin_left = -159.0
margin_top = -63.0
margin_right = 159.0
margin_bottom = 63.0

[node name="movement" parent="UI" instance=ExtResource( 7 )]

[node name="Jump" type="TouchScreenButton" parent="UI"]
position = Vector2( 899, 285 )
normal = ExtResource( 15 )
pressed = ExtResource( 14 )
action = "jump"
script = ExtResource( 18 )

[node name="CoolDown" type="Timer" parent="UI/Jump"]
wait_time = 3.0
one_shot = true

[node name="BottomRight" type="Control" parent="UI"]
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -40.0
margin_top = -40.0

[node name="JumpProgress" type="TextureProgress" parent="UI/BottomRight"]
margin_left = -186.0
margin_top = -242.0
margin_right = -100.0
margin_bottom = -226.0
texture_over = ExtResource( 17 )
texture_progress = ExtResource( 16 )

[node name="HillWall" parent="." instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 37.5441, 8.51478, 0.395824 )

[node name="Killer" type="Area" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 48.4429, 0 )
script = ExtResource( 10 )
speed = 20.0
max_difference = 60.0

[node name="CollisionShape" type="CollisionShape" parent="Killer"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -39.7832, 0 )
shape = SubResource( 5 )

[node name="Sprite3D" type="Sprite3D" parent="Killer"]
transform = Transform( -4.37114e-08, -1200, 0, 1, -5.24537e-05, 0, 0, 0, 1, 0.138657, -42.523, -25.2518 )
modulate = Color( 1, 1, 1, 0.317647 )
pixel_size = 0.2
texture = SubResource( 7 )

[node name="Timer" type="Timer" parent="Killer"]
wait_time = 3.0
one_shot = true

[node name="Generator" type="Node" parent="."]
script = ExtResource( 5 )
hillprov = 50
betweencaves = 2
cavechance = 40
chunk = ExtResource( 23 )
chunkbase = ExtResource( 24 )
hillscript = ExtResource( 25 )
plainscript = ExtResource( 26 )
cavescript = ExtResource( 29 )

[node name="FreeCamera" type="Camera" parent="."]
far = 1000.0
script = ExtResource( 11 )
rotation_speed = 0.1
move_speed = 10.0

[connection signal="body_entered" from="player/ruedafront/front" to="player/Suspension" method="_on_front_body_entered"]
[connection signal="pressed" from="UI/Jump" to="UI/Jump" method="_on_Jump_pressed"]
[connection signal="timeout" from="Killer/Timer" to="Killer" method="_on_Timer_timeout"]

[editable path="player"]
[editable path="player/ruedafront"]
[editable path="player/ruedafront/vis/rueda3"]
[editable path="player/ruedafront/vis/rueda4"]
